<div id="banner" class="card-panel teal lighten-1 white-text z-depth-0">
  <h5 class="right-align container">
    Hệ thống tạo lịch thi dành cho sinh viên UIT
  </h5>
</div>

<div class="container">
  <div id="us-creator" class="card-panel">
    <%= form_tag uit_es_creator_path, method: :get do %>
      <div class="input-field">
        <%= text_field_tag :student_id, params[:student_id],
          autocomplete: "off", class: "center-align" %>
        <%= label_tag :student_id, "Mã số sinh viên" %>
      </div>
    <% end %>

    <br>

    <% if @result.blank? && params[:student_id] %>
      <h6 class="center-align">Hệ thống không thể tìm thấy MSSV này :&#40;</h6>
    <% elsif @result.present? %>
      <div id="schedule">
        <h4 class="center-align">
          Lịch thi của <%= @full_name %>
        </h4>
        
        <div style="overflow-x: auto;">
          <table class="striped">
            <thead>
              <tr>
                <th>Ngày thi</th>
                <th>Thứ</th>
                <th>Ca thi</th>
                <th>Môn thi</th>
                <th>Số báo danh</th>
                <th>Phòng</th>
                <th>Ghi chú</th>
              </tr>
            </thead>

            <tbody>
              <% @result.each do |class_code, data| %>
              <% student = data['students'][params[:student_id]] %>
              <tr>
                <td><%= data['date'] %></td>
                <td><%= data['day'] %></td>
                <td><%= data['shift'] %></td>
                <td><%= data['name'] %></td>
                <td><%= student['id_number'] %></td>
                <td><%= "#{data['room']} (#{data['sum']})" %></td>
                <td><%= student['note'] %></td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <% end %>
  </div>
</div>